<nav class="navbar  bg-blue navbar-expand-lg navbar-light shadow-sm" style="height: auto;">
  <div class="container-fluid">
    <div class="col-lg-2 cursor-pointer" routerLink="/user">
      <span class="d-flex align-items-center" style="color:  #fff;"><i class="pi pi-bolt" style="font-size: 2rem"></i>
        <span style="font-size: 24px;"> LMS</span> </span>
      <button class="navbar-toggler text-white" type="button" data-toggle="collapse"
        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
    <div class="col-lg-8 d-flex justify-content-center">
      <div class="collapse navbar-collapse justify-content-center" id="navbarNav" style="font-size: 24px;">
        <ul class="navbar-nav align-items-center  mb-lg-0" style="gap: 35px;">
          <li class="nav-item">
            <a class="nav-link nave-menu active" aria-current="page" routerLink="/user" routerLinkActive="active"
              style="font-size: 1.3rem;"> Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link nave-menu" routerLink="/user/library" routerLinkActive="active"
              style="font-size: 1.3rem;">My Libraries</a>
          </li>

          <li class="nav-item">
            <a class="nav-link nave-menu" routerLink="/user/assessment" style="font-size: 1.3rem;">Assessment</a>
          </li>
          <li class="nav-item">
            <a class="nav-link nave-menu" style="font-size: 1.3rem;" routerLink="/user/mycart">
              <i class="pi pi-shopping-cart mr-1" style="font-size: 1.5rem;"  >
                <span pBadge styleClass="font-size:0.4rem"   value={{cartLength}}></span>
              </i>
              </a>
          </li>

        </ul>
      </div>
    </div>
    <div class="col-lg-2 d-flex justify-content-end cursor-pointer">
      <p-avatar shape="circle" size="large" icon="pi pi-user" (click)="menu.toggle($event)"
        [style]="{'background-color':'#2188d9', 'color': '#ffffff'}"></p-avatar>
      <p-menu #menu [popup]="true" [model]="items"></p-menu>
    </div>
  </div>



</nav>

<div class="card shadow-2">
  <p-dialog header="Change Password" [modal]="true" [closable]="false" [dismissableMask]="true"
    [(visible)]="passwordDialog" [style]="{'width':'30vw','height':'auto'}">
    <form action="" [formGroup]="changePassword" (ngSubmit)="changePassowrdSubmit()">

      <div class="p-fluid  d-flex flex-column align-items-center">
        <div class="field mt-2 w-75">
          <label for="email">Email :</label>
          <span class="p-float-label">
            <input type="text" readonly class="bg-light-grey input-shadow w-100 p-inputtext" formControlName="email"
              pInputText>
          </span>
        </div>

        <div class="field mt-2 w-75">
          <label for="oldPassword">Current Password :<span class="text-danger fs-5"> * </span> </label>
          <span class="p-float-label">
            <input type="text" [class.currentPwdIP]="currentPwdInput"
              class="bg-light-grey input-shadow w-100 p-inputtext" formControlName="oldPassword" pInputText
              placeholder="Enter current password.">
            <small class="p-error block"
              *ngIf="changePassword.get('oldPassword')?.invalid && changePassword.get('oldPassword')?.touched">
              Password is required.
            </small>

          </span>
        </div>

        <div class="w-100 d-flex flex-column align-items-center " *ngIf="toNewPassword">
          <div class="field mt-2 w-75">
            <label for="name">New Password :<span class="text-danger fs-5"> * </span> </label>
            <span class="p-float-label">
              <input type="password" class="bg-light-grey input-shadow w-100 p-inputtext" formControlName="newPassword"
                pInputText placeholder="Enter new password.">
              <small class="p-error block"
                *ngIf="changePassword.get('newPassword')?.errors?.['required'] && changePassword.get('newPassword')?.touched">
                Password is required.
              </small>
              <small class="p-error block"
                *ngIf="changePassword.get('newPassword')?.errors?.['pattern'] && !changePassword.get('newPassword')?.errors?.['required'] && changePassword.get('newPassword')?.dirty">
                Password must contain at least one capital alphabet, one number, and one special character.
              </small>
            </span>
          </div>

          <div class="field mt-2 w-75">
            <label for="name">Confirm Password :<span class="text-danger fs-5"> * </span> </label>
            <span class="p-float-label">
              <input type="password" class="bg-light-grey input-shadow w-100 p-inputtext"
                formControlName="confirmPassword" pInputText placeholder="Confirm password">
              <small class="p-error block"
                *ngIf="changePassword.get('confirmPassword')?.errors?.['required'] && changePassword.get('confirmPassword')?.touched">
                Please confirm your password.
              </small>
              <small class="p-error block"
                *ngIf="changePassword.get('confirmPassword')?.value !== changePassword.get('newPassword')?.value && !changePassword.get('confirmPassword')?.errors?.['required'] && changePassword.get('confirmPassword')?.dirty">
                Passwords do not match.
              </small>
            </span>
          </div>

        </div>
      </div>



      <div class="d-flex justify-content-between my-2 mx-3">
        <button type="reset" class="btn btn-secondary" (click)="cancelForm()">Cancel</button>
        <button type="submit" class="btn btn-success" [disabled]="changePassword.invalid">Change Password</button>
      </div>


    </form>
  </p-dialog>
</div>

<p-toast position="top-center"></p-toast>
