"use strict";(self.webpackChunklms=self.webpackChunklms||[]).push([[8503],{31346:(M,c,t)=>{t.r(c),t.d(c,{default:()=>U});var e=t(67294),s=t(86896),m=t(94649),o=t(41647),u=t(185),A=t(53979),P=t(29728),v=t(49066),h=t(41580),O=t(11047),y=t(75515),R=t(11276),E=t(74571),n=t(20707),d=t(16364),i=t(85018),r=t(8934),l=t(94123),f=t(80826),a=t(93742),p=t(90306),B=t(88972),L=t(25752);const b=(0,B.ZP)(L.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:g})=>g.colors.neutral600};
    }
  }
`;var C=t(87561);const w=C.Ry().shape({restrictedAccess:C.O7(),password:C.Z_().when("restrictedAccess",(g,D)=>g?D.required(o.I0.required):D)}),U=()=>{(0,o.go)();const{formatMessage:g}=(0,s.Z)(),{submitMutation:D,data:I,isLoading:K}=(0,p.Z)(),[S,$]=(0,e.useState)(!1),F=x=>{D.mutate({prefix:I?.prefix,body:x})};return e.createElement(u.o,null,K?e.createElement(o.dO,null,"Plugin settings are loading"):e.createElement(m.J9,{initialValues:{restrictedAccess:I?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:F,validationSchema:w},({handleSubmit:x,values:T,handleChange:H,errors:Z,setFieldTouched:Q,setFieldValue:W})=>e.createElement(o.l0,{noValidate:!0,onSubmit:x},e.createElement(A.T,{title:g({id:(0,a.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:g({id:(0,a.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(o.jW,{permissions:f.Z.update},e.createElement(P.z,{type:"submit",startIcon:e.createElement(i.Z,null)},g({id:(0,a.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"})))}),e.createElement(v.D,null,e.createElement(h.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(O.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(y.Z,{variant:"delta",as:"h2"},g({id:"global.settings",defaultMessage:"Settings"})),e.createElement(R.r,{gap:4},e.createElement(E.P,{col:6,s:12},e.createElement(n.s,{name:"restrictedAccess",label:g({id:(0,a.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:g({id:(0,a.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:T.restrictedAccess,onChange:()=>{T.restrictedAccess===!0&&(W("password","",!1),Q("password",!1,!1)),W("restrictedAccess",!T.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),T.restrictedAccess&&e.createElement(E.P,{col:6,s:12},e.createElement(d.o,{label:g({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:S?"text":"password",value:T.password,onChange:H,error:Z.password?g({id:Z.password,defaultMessage:"Invalid value"}):null,endAction:e.createElement(b,{onClick:z=>{z.stopPropagation(),$(j=>!j)},label:g(S?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},S?e.createElement(r.Z,null):e.createElement(l.Z,null))})))))))))}},90306:(M,c,t)=>{t.d(c,{Z:()=>A});var e=t(88767),s=t(41647),m=t(49950),o=t(798);const A=()=>{const P=(0,e.useQueryClient)(),v=(0,s.lm)(),{isLoading:h,data:O}=(0,e.useQuery)(["get-documentation",m.Z],async()=>{try{const{data:a}=await n(`/${m.Z}/getInfos`);return a}catch{return v({type:"warning",message:{id:"notification.error"}}),null}}),{del:y,post:R,put:E,get:n}=(0,s.kY)(),d=a=>{v({type:"warning",message:a.response.payload.message})},i=(a,p)=>{P.invalidateQueries("get-documentation"),v({type:a,message:{id:(0,o.Z)(p)}})},r=(0,e.useMutation)(({prefix:a,version:p})=>y(`${a}/deleteDoc/${p}`),{onSuccess:()=>i("info","notification.delete.success"),onError:a=>d(a)}),l=(0,e.useMutation)(({prefix:a,body:p})=>E(`${a}/updateSettings`,p),{onSuccess:()=>i("success","notification.update.success"),onError:d}),f=(0,e.useMutation)(({prefix:a,version:p})=>R(`${a}/regenerateDoc`,{version:p}),{onSuccess:()=>i("info","notification.generate.success"),onError:a=>d(a)});return{data:O,isLoading:h,deleteMutation:r,submitMutation:l,regenerateDocMutation:f}}},798:(M,c,t)=>{t.d(c,{Z:()=>m});var e=t(49950);const m=o=>`${e.Z}.${o}`},93742:(M,c,t)=>{t.d(c,{O:()=>e.Z});var e=t(798)},49066:(M,c,t)=>{t.d(c,{D:()=>o});var e=t(67294),s=t(45697),m=t(41580);const o=({children:u})=>e.createElement(m.x,{paddingLeft:10,paddingRight:10},u);o.propTypes={children:s.node.isRequired}},53979:(M,c,t)=>{t.d(c,{T:()=>y});var e=t(67294),s=t(45697),m=t(88972),o=t(41580),u=t(11047);const A=n=>{const d=(0,e.useRef)(null),[i,r]=(0,e.useState)(!0),l=([f])=>{r(f.isIntersecting)};return(0,e.useEffect)(()=>{const f=d.current,a=new IntersectionObserver(l,n);return f&&a.observe(d.current),()=>{f&&a.disconnect()}},[d,n]),[d,i]};var P=t(95355);const v=(n,d)=>{const i=(0,P.W)(d);(0,e.useLayoutEffect)(()=>{const r=new ResizeObserver(i);return Array.isArray(n)?n.forEach(l=>{l.current&&r.observe(l.current)}):n.current&&r.observe(n.current),()=>{r.disconnect()}},[n,i])};var h=t(75515);const O=()=>{const n=(0,e.useRef)(null),[d,i]=(0,e.useState)(null),[r,l]=A({root:null,rootMargin:"0px",threshold:0});return v(r,()=>{r.current&&i(r.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{n.current&&i(n.current.getBoundingClientRect())},[n]),{containerRef:r,isVisible:l,baseHeaderLayoutRef:n,headerSize:d}},y=n=>{const{containerRef:d,isVisible:i,baseHeaderLayoutRef:r,headerSize:l}=O();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:l?.height},ref:d},i&&e.createElement(E,{ref:r,...n})),!i&&e.createElement(E,{...n,sticky:!0,width:l?.width}))};y.displayName="HeaderLayout";const R=(0,m.ZP)(o.x)`
  width: ${n=>n.width}px;
`,E=e.forwardRef(({navigationAction:n,primaryAction:d,secondaryAction:i,subtitle:r,title:l,sticky:f,width:a,...p},B)=>{const L=typeof r=="string";return f?e.createElement(R,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:a,zIndex:4,"data-strapi-header-sticky":!0},e.createElement(u.k,{justifyContent:"space-between"},e.createElement(u.k,null,n&&e.createElement(o.x,{paddingRight:3},n),e.createElement(o.x,null,e.createElement(h.Z,{variant:"beta",as:"h1",...p},l),L?e.createElement(h.Z,{variant:"pi",textColor:"neutral600"},r):r),i?e.createElement(o.x,{paddingLeft:4},i):null),e.createElement(u.k,null,d?e.createElement(o.x,{paddingLeft:2},d):void 0))):e.createElement(o.x,{ref:B,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0},n?e.createElement(o.x,{paddingBottom:2},n):null,e.createElement(u.k,{justifyContent:"space-between"},e.createElement(u.k,{minWidth:0},e.createElement(h.Z,{as:"h1",variant:"alpha",...p},l),i?e.createElement(o.x,{paddingLeft:4},i):null),d),L?e.createElement(h.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},r):r)});E.displayName="BaseHeaderLayout",E.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},E.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,sticky:s.bool,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired,width:s.number},y.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},y.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired}},185:(M,c,t)=>{t.d(c,{o:()=>u});var e=t(67294),s=t(45697),m=t(88972);const o=m.ZP.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,u=({labelledBy:A,...P})=>{const v=A||"main-content-title";return e.createElement(o,{"aria-labelledby":v,id:"main-content",tabIndex:-1,...P})};u.defaultProps={labelledBy:void 0},u.propTypes={labelledBy:s.string}}}]);
