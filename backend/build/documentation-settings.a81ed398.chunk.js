"use strict";(self.webpackChunklms=self.webpackChunklms||[]).push([[8503],{31346:(O,c,t)=>{t.r(c),t.d(c,{default:()=>U});var e=t(67294),a=t(86896),m=t(94649),o=t(79174),u=t(185),P=t(53979),M=t(29728),h=t(49066),y=t(41580),R=t(11047),A=t(75515),T=t(11276),E=t(74571),n=t(20707),d=t(16364),r=t(85018),s=t(8934),l=t(94123),v=t(80826),p=t(93742),i=t(90306),f=t(88972),D=t(25752);const b=(0,f.ZP)(D.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:g})=>g.colors.neutral600};
    }
  }
`;var C=t(87561);const w=C.Ry().shape({restrictedAccess:C.O7(),password:C.Z_().when("restrictedAccess",(g,B)=>g?B.required(o.I0.required):B)}),U=()=>{(0,o.go)();const{formatMessage:g}=(0,a.Z)(),{submitMutation:B,data:I,isLoading:K}=(0,i.Z)(),[S,$]=(0,e.useState)(!1),F=x=>{B.mutate({prefix:I?.prefix,body:x})};return e.createElement(u.o,null,K?e.createElement(o.dO,null,"Plugin settings are loading"):e.createElement(m.J9,{initialValues:{restrictedAccess:I?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:F,validationSchema:w},({handleSubmit:x,values:L,handleChange:H,errors:Z,setFieldTouched:Q,setFieldValue:W})=>e.createElement(o.l0,{noValidate:!0,onSubmit:x},e.createElement(P.T,{title:g({id:(0,p.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:g({id:(0,p.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(o.jW,{permissions:v.Z.update},e.createElement(M.z,{type:"submit",startIcon:e.createElement(r.Z,null)},g({id:(0,p.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"})))}),e.createElement(h.D,null,e.createElement(y.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(R.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(A.Z,{variant:"delta",as:"h2"},g({id:"global.settings",defaultMessage:"Settings"})),e.createElement(T.r,{gap:4},e.createElement(E.P,{col:6,s:12},e.createElement(n.s,{name:"restrictedAccess",label:g({id:(0,p.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:g({id:(0,p.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:L.restrictedAccess,onChange:()=>{L.restrictedAccess===!0&&(W("password","",!1),Q("password",!1,!1)),W("restrictedAccess",!L.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),L.restrictedAccess&&e.createElement(E.P,{col:6,s:12},e.createElement(d.o,{label:g({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:S?"text":"password",value:L.password,onChange:H,error:Z.password?g({id:Z.password,defaultMessage:"Invalid value"}):null,endAction:e.createElement(b,{onClick:z=>{z.stopPropagation(),$(j=>!j)},label:g(S?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},S?e.createElement(s.Z,null):e.createElement(l.Z,null))})))))))))}},90306:(O,c,t)=>{t.d(c,{Z:()=>P});var e=t(88767),a=t(79174),m=t(49950),o=t(798);const P=()=>{const M=(0,e.useQueryClient)(),h=(0,a.lm)(),{isLoading:y,isError:R,data:A}=(0,e.useQuery)(["get-documentation",m.Z],async()=>{try{const{data:i}=await d(`/${m.Z}/getInfos`);return i}catch{return h({type:"warning",message:{id:"notification.error"}}),null}}),{del:T,post:E,put:n,get:d}=(0,a.kY)(),r=i=>{h({type:"warning",message:i.response.payload.message})},s=(i,f)=>{M.invalidateQueries("get-documentation"),h({type:i,message:{id:(0,o.Z)(f)}})},l=(0,e.useMutation)(({prefix:i,version:f})=>T(`${i}/deleteDoc/${f}`),{onSuccess:()=>s("info","notification.delete.success"),onError:i=>r(i)}),v=(0,e.useMutation)(({prefix:i,body:f})=>n(`${i}/updateSettings`,f),{onSuccess:()=>s("success","notification.update.success"),onError:r}),p=(0,e.useMutation)(({prefix:i,version:f})=>E(`${i}/regenerateDoc`,{version:f}),{onSuccess:()=>s("info","notification.generate.success"),onError:i=>r(i)});return{data:A,isLoading:y,isError:R,deleteMutation:l,submitMutation:v,regenerateDocMutation:p}}},798:(O,c,t)=>{t.d(c,{Z:()=>m});var e=t(49950);const m=o=>`${e.Z}.${o}`},93742:(O,c,t)=>{t.d(c,{O:()=>e.Z});var e=t(798)},49066:(O,c,t)=>{t.d(c,{D:()=>o});var e=t(67294),a=t(45697),m=t(41580);const o=({children:u})=>e.createElement(m.x,{paddingLeft:10,paddingRight:10},u);o.propTypes={children:a.node.isRequired}},53979:(O,c,t)=>{t.d(c,{A:()=>E,T:()=>A});var e=t(67294),a=t(45697),m=t(88972),o=t(41580),u=t(11047);const P=n=>{const d=(0,e.useRef)(null),[r,s]=(0,e.useState)(!0),l=([v])=>{s(v.isIntersecting)};return(0,e.useEffect)(()=>{const v=d.current,p=new IntersectionObserver(l,n);return v&&p.observe(d.current),()=>{v&&p.disconnect()}},[d,n]),[d,r]};var M=t(95355);const h=(n,d)=>{const r=(0,M.W)(d);(0,e.useLayoutEffect)(()=>{const s=new ResizeObserver(r);return Array.isArray(n)?n.forEach(l=>{l.current&&s.observe(l.current)}):n.current&&s.observe(n.current),()=>{s.disconnect()}},[n,r])};var y=t(75515);const R=()=>{const n=(0,e.useRef)(null),[d,r]=(0,e.useState)(null),[s,l]=P({root:null,rootMargin:"0px",threshold:0});return h(s,()=>{s.current&&r(s.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{n.current&&r(n.current.getBoundingClientRect())},[n]),{containerRef:s,isVisible:l,baseHeaderLayoutRef:n,headerSize:d}},A=n=>{const{containerRef:d,isVisible:r,baseHeaderLayoutRef:s,headerSize:l}=R();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:l?.height},ref:d},r&&e.createElement(E,{ref:s,...n})),!r&&e.createElement(E,{...n,sticky:!0,width:l?.width}))};A.displayName="HeaderLayout";const T=(0,m.ZP)(o.x)`
  width: ${n=>n.width}px;
`,E=e.forwardRef(({navigationAction:n,primaryAction:d,secondaryAction:r,subtitle:s,title:l,sticky:v,width:p,...i},f)=>{const D=typeof s=="string";return v?e.createElement(T,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:p,zIndex:4,"data-strapi-header-sticky":!0},e.createElement(u.k,{justifyContent:"space-between"},e.createElement(u.k,null,n&&e.createElement(o.x,{paddingRight:3},n),e.createElement(o.x,null,e.createElement(y.Z,{variant:"beta",as:"h1",...i},l),D?e.createElement(y.Z,{variant:"pi",textColor:"neutral600"},s):s),r?e.createElement(o.x,{paddingLeft:4},r):null),e.createElement(u.k,null,d?e.createElement(o.x,{paddingLeft:2},d):void 0))):e.createElement(o.x,{ref:f,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0},n?e.createElement(o.x,{paddingBottom:2},n):null,e.createElement(u.k,{justifyContent:"space-between"},e.createElement(u.k,{minWidth:0},e.createElement(y.Z,{as:"h1",variant:"alpha",...i},l),r?e.createElement(o.x,{paddingLeft:4},r):null),d),D?e.createElement(y.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},s):s)});E.displayName="BaseHeaderLayout",E.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},E.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,sticky:a.bool,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired,width:a.number},A.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},A.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired}},185:(O,c,t)=>{t.d(c,{o:()=>u});var e=t(67294),a=t(45697),m=t(88972);const o=m.ZP.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,u=({labelledBy:P,...M})=>{const h=P||"main-content-title";return e.createElement(o,{"aria-labelledby":h,id:"main-content",tabIndex:-1,...M})};u.defaultProps={labelledBy:void 0},u.propTypes={labelledBy:a.string}}}]);
